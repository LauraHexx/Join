<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: generalFunctions.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: generalFunctions.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>//IN THIS FILE ARE FUNCTIONS WHICH ARE USED ON DIFFERENT TEMPLATES

/**
 * Loads the html elements and styles the current html element in the nav bar
 * @param {string} currentHtmlTemplate - The current HTML template to mark in the nav.
 * @async
 */
async function init(currentHtmlTemplate) {
  await includeHTML();
  styleCurrentSectionInNav(currentHtmlTemplate);
}

/*GENERAL************************************************************************************/

/**
 * Styles the current section in the navigation by adding the "activeSection" class to the corresponding HTML element.
 * @param {string} currentHtmlTemplate - The current HTML template.
 */
function styleCurrentSectionInNav(currentHtmlTemplate) {
  if (!currentHtmlTemplate) return;
  const path = window.location.pathname;
  if (path.includes(currentHtmlTemplate)) {
    document.getElementById(currentHtmlTemplate).classList.add("activeSection");
  }
}

/**
 * Toggles a class on an element.
 * @param {string} elementId - The ID of the element.
 * @param {string} className - The class name to toggle.
 */
function toggleClass(elementId, className) {
  let element = document.getElementById(elementId);
  element.classList.toggle(className);
}

/**
 * Toggles the "filterBlur" class on the specified elements nav, header and #content .
 */
function toggleBlurFilter() {
  const elements = document.querySelectorAll("nav, header, #content");
  elements.forEach((element) => {
    element.classList.toggle("filterBlur");
  });
}

/**
 * Plays an animation on an element by adding the specified animation class.
 * @param {string} id - The ID of the element.
 * @param {string} animationClass - The animation class to add.
 */
function playAnimation(id, animationClass) {
  let element = document.getElementById(id);
  element.classList.add(animationClass);
}

/**
 * Changes the image of an element on hover and mouseout events.
 * @param {string} elementId - The ID of the element.
 * @param {string} imgSrcOnHover - The image source on hover.
 * @param {string} imgSrcOnMouseOut - The image source on mouseout.
 */
function changeImageOnHover(elementId, imgSrcOnHover, imgSrcOnMouseOut) {
  const element = document.getElementById(elementId);
  const parent = element.parentElement;
  setEventChangeImageOnHover(element, parent);
}

/**
 * Sets event listeners to change the image of an element on hover and mouseout events.
 * @param {HTMLElement} element - The element to add event listeners to.
 * @param {HTMLElement} parent - The parent element for additional mouseover and mouseout events.
 */
function setEventChangeImageOnHover(element, parent) {
  element.addEventListener("mouseover", () => {
    element.src = imgSrcOnHover;
  });
  element.addEventListener("mouseout", () => {
    element.src = imgSrcOnMouseOut;
  });
  parent.addEventListener("mouseover", () => {
    element.src = imgSrcOnHover;
  });
  parent.addEventListener("mouseout", () => {
    element.src = imgSrcOnMouseOut;
  });
}

/**
 * Sets event listeners to change images on hover on the add Task display.
 */
function setEventListenerHoverBtn() {
  changeImageOnHover(
    "clearBtnIcon",
    "../assets/img/addTaskCancelBright.svg",
    "../assets/img/addTaskCancelDark.svg"
  );
  changeImageOnHover(
    "clearBtnIcon",
    "../assets/img/addTaskCancelBright.svg",
    "../assets/img/addTaskCancelDark.svg"
  );
}

/**
 * Loads a template by setting the window location.
 * @param {string} template - The template URL to load.
 */
function loadTemplate(template) {
  window.location = template;
}

/**
 * Goes back to the previous page in the browsing history.
 */
function goBackToPreviousPage() {
  window.history.back();
}

/**
 * Logs out the user by removing the "loggedUserId" item from the local storage and loading the index.html template.
 */
async function logOut() {
  removeItemFromLocalStorage("loggedUserId");
  loadTemplate("../index.html");
}

/**
 * Retrieves contact data by ID from the CONTACTS array.
 * @param {string} id - The ID of the contact.
 * @returns {object} - The contact object matching the provided ID.
 */
function getContactData(id) {
  const contact = CONTACTS.find((contact) => contact.id === id);
  return contact;
}

/**
 * Hides an error element by adding the "d-none" class if it is not already hidden.
 * @param {string} id - The ID of the error element.
 */
function hideError(id) {
  const errorElement = document.getElementById(id);
  if (!errorElement.classList.contains("d-none")) {
    errorElement.classList.add("d-none");
  }
}

/**
 * Shows an error element by removing the "d-none" class.
 * @param {string} id - The ID of the error element.
 */
function showError(id) {
  const errorElement = document.getElementById(id);
  errorElement.classList.remove("d-none");
}

/**
 * Generates a random color from a predefined set of colors.
 * @returns {string} A randomly selected color from the predefined set.
 */
function getRandomColor() {
  const colors = ["#BCC9DE", "#BB871E", "#F1F1E6"];
  const randomIndex = Math.floor(Math.random() * colors.length);
  return colors[randomIndex];
}

/**
 * Sorts an array of objects alphabetically based on the 'name' property.
 * @param {Array} array - The array to be sorted.
 */
function sortArrayAlphabetically(array) {
  array.sort((a, b) => a.name.localeCompare(b.name));
}

/*DROP DOWN - ADD TASK************************************************************************************/

/**
 * Sets up event listeners to close the dropdown menus.
 * Invokes the necessary functions to handle dropdown closing.
 */
function setEventCloseDropDown() {
  closeDropDown();
  toggleCategoryDropDownContainer();
  toggleContactDropDownContainer();
}

/**
 * Listens for clicks on the page and hides the dropdown lists if the clicked element
 * is not within the selectContactsDiv or selectCategoryDiv.
 */
function closeDropDown() {
  document.addEventListener("click", handleClickOnPage);
  function handleClickOnPage(event) {
    if (
      !event.target.closest("#selectContactsDiv") ||
      !event.target.closest("#selectCategoryDiv")
    ) {
      hideDropdown("listContacts");
      hideDropdown("listCategorys");
    }
  }
}

/**
 * Hides a dropdown list by adding the 'd-none' class to the element.
 * @param {string} id - The ID of the dropdown list element.
 */
function hideDropdown(id) {
  let dropDownList = document.getElementById(id);
  dropDownList.classList.add("d-none");
}

/**
 * Listens for clicks on the selectCategoryDiv element and toggles the visibility of the listCategorys dropdown list.
 */
function toggleCategoryDropDownContainer() {
  document
    .getElementById("selectCategoryDiv")
    .addEventListener("click", handleClick);

  function handleClick(event) {
    event.stopPropagation();
    toggleClass("listCategorys", "d-none");
  }
}

/**
 * Listens for clicks on the selectContactsDiv element and toggles the visibility of the listContacts dropdown list.
 */
function toggleContactDropDownContainer() {
  document
    .getElementById("selectContactsDiv")
    .addEventListener("click", handleClick);

  function handleClick(event) {
    event.stopPropagation();
    toggleClass("listContacts", "d-none");
  }
}

/*DISPLAYS************************************************************************************/

/**
 * Shows a display element by applying an animation class and toggling a specified class.
 * If the window width is greater than 920px, an animation is played.
 * @param {string} id - The ID of the display element.
 * @param {string} animationClass - The animation class to be applied.
 * @param {string} className - The class to be toggled.
 */
function showDisplay(id, animationClass, className) {
  if (window.innerWidth > 920) {
    playAnimation(id, animationClass);
  }
  toggleClass(id, className);
  toggleBlurFilter();
}

/**
 * Hides a display element by toggling a specified class and removing the blur filter.
 * @param {string} id - The ID of the display element.
 * @param {string} className - The class to be toggled.
 */
function hideDisplay(id, className) {
  toggleClass(id, className);
  toggleBlurFilter();
}

/*USERS************************************************************************************/

/**
 * Loads user data from storage asynchronously.
 * Parses the stored data and assigns it to the USERS variable.
 * @async
 */
async function loadUserData() {
  try {
    USERS = JSON.parse(await getItem("users"));
    console.log("USERS SERVER", USERS);
  } catch (e) {
    console.error("Loading error:", e);
  }
}

/**
 * Retrieves the logged-in user's data.
 * Gets the logged user ID from local storage and retrieves the corresponding user data.
 * If no logged-in user is found, redirects to the index.html page.
 * @async
 */
async function getLoggedUser() {
  const loggedUserId = getItemFromLocalStorage("loggedUserId");
  if (!loggedUserId) {
    loadTemplate("../index.html");
  } else {
    LOGGED_USER = getUserData(loggedUserId);
    console.log("LOGGED_USER:", LOGGED_USER);
  }
}

/**
 * Generates and returns a new user ID based on the number of existing users.
 * @returns {number} The generated user ID.
 */
function getUserId() {
  const id = USERS.length + 1;
  return id;
}

/**
 * Retrieves the user data for a given user ID.
 * @param {number} id - The ID of the user.
 * @returns {object} The user object corresponding to the provided ID.
 */
function getUserData(id) {
  const user = USERS.find((user) => user.id === id);
  return user;
}

/**
 * Extracts the initials from a full name.
 * If the full name is provided, it trims and splits it into parts.
 * Determines whether it's a single name or multiple names and generates the initials accordingly.
 * @param {string} fullname - The full name.
 * @returns {string} The initials extracted from the full name.
 */
function getInitials(fullname) {
  if (fullname) {
    const partsOfName = fullname.trim().split(" ");
    let initials = "";
    if (oneName(partsOfName)) {
      initials = getFirstTwoInitials(partsOfName[0]);
    } else {
      initials = getFirstAndLastInitial(partsOfName);
    }
    return initials;
  }
}

/**
 * Checks if the name has only one part.
 * @param {Array} partsOfName - The parts of the name.
 * @returns {boolean} True if the name has only one part, false otherwise.
 */
function oneName(partsOfName) {
  return partsOfName.length === 1;
}

/**
 * Generates the initials from the first two characters of a name.
 * @param {string} name - The name.
 * @returns {string} The initials extracted from the name.
 */
function getFirstTwoInitials(name) {
  const firstInitial = name[0].toUpperCase();
  const secondInitial = name[1].toUpperCase();
  const initials = firstInitial + secondInitial;
  return initials;
}

/**
 * Generates the initials from the first character of the first name and the first character of the last name.
 * @param {Array} partsOfName - The parts of the name.
 * @returns {string} The initials extracted from the first and last name.
 */
function getFirstAndLastInitial(partsOfName) {
  const firstNameInitial = partsOfName[0][0].toUpperCase();
  const lastNameInitial = partsOfName[partsOfName.length - 1][0].toUpperCase();
  const initials = firstNameInitial + lastNameInitial;
  return initials;
}

/**
 * Sets the data for greeting by storing the logged user ID in local storage.
 * @param {number} userId - The ID of the logged user.
 */
function setDataForGreeting(userId) {
  setItemInLocalStorage("loggedUserId", userId);
}

/*LOCAL STORAGE************************************************************************************/

/**
 * Stores an item in the local storage as a stringified JSON value.
 * @param {string} key - The key for the item.
 * @param {*} value - The value to be stored.
 */
function setItemInLocalStorage(key, value) {
  localStorage.setItem(key, JSON.stringify(value));
}

/**
 * Retrieves an item from the local storage and parses it from JSON.
 * @param {string} key - The key of the item to be retrieved.
 * @returns {*} The retrieved item value.
 */
function getItemFromLocalStorage(key) {
  return JSON.parse(localStorage.getItem(key));
}

/**
 * Removes an item from the local storage.
 * @param {string} key - The key of the item to be removed.
 */
function removeItemFromLocalStorage(key) {
  localStorage.removeItem(key);
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#changeImageOnHover">changeImageOnHover</a></li><li><a href="global.html#checkForExistingUser">checkForExistingUser</a></li><li><a href="global.html#checkSignUpData">checkSignUpData</a></li><li><a href="global.html#closeDropDown">closeDropDown</a></li><li><a href="global.html#closeMenu">closeMenu</a></li><li><a href="global.html#countTasks">countTasks</a></li><li><a href="global.html#countTasksInProcessStep">countTasksInProcessStep</a></li><li><a href="global.html#countTasksUrgentPrio">countTasksUrgentPrio</a></li><li><a href="global.html#determineDeadline">determineDeadline</a></li><li><a href="global.html#formatDueDate">formatDueDate</a></li><li><a href="global.html#getContactData">getContactData</a></li><li><a href="global.html#getCurrentHour">getCurrentHour</a></li><li><a href="global.html#getDueDates">getDueDates</a></li><li><a href="global.html#getFirstAndLastInitial">getFirstAndLastInitial</a></li><li><a href="global.html#getFirstTwoInitials">getFirstTwoInitials</a></li><li><a href="global.html#getGreeting">getGreeting</a></li><li><a href="global.html#getInitials">getInitials</a></li><li><a href="global.html#getItem">getItem</a></li><li><a href="global.html#getItemFromLocalStorage">getItemFromLocalStorage</a></li><li><a href="global.html#getLoggedUser">getLoggedUser</a></li><li><a href="global.html#getMaxDueDate">getMaxDueDate</a></li><li><a href="global.html#getNextDueDate">getNextDueDate</a></li><li><a href="global.html#getRandomColor">getRandomColor</a></li><li><a href="global.html#getToday">getToday</a></li><li><a href="global.html#getUserData">getUserData</a></li><li><a href="global.html#getUserId">getUserId</a></li><li><a href="global.html#goBackToPreviousPage">goBackToPreviousPage</a></li><li><a href="global.html#greetUser">greetUser</a></li><li><a href="global.html#greeting">greeting</a></li><li><a href="global.html#hideDisplay">hideDisplay</a></li><li><a href="global.html#hideDropdown">hideDropdown</a></li><li><a href="global.html#hideError">hideError</a></li><li><a href="global.html#init">init</a></li><li><a href="global.html#initSignUp">initSignUp</a></li><li><a href="global.html#initSummary">initSummary</a></li><li><a href="global.html#isMidday">isMidday</a></li><li><a href="global.html#isMorning">isMorning</a></li><li><a href="global.html#loadTemplate">loadTemplate</a></li><li><a href="global.html#loadUserData">loadUserData</a></li><li><a href="global.html#logOut">logOut</a></li><li><a href="global.html#oneName">oneName</a></li><li><a href="global.html#openMenu">openMenu</a></li><li><a href="global.html#playAnimation">playAnimation</a></li><li><a href="global.html#pushNewUserToArray">pushNewUserToArray</a></li><li><a href="global.html#registerNewUser">registerNewUser</a></li><li><a href="global.html#removeItemFromLocalStorage">removeItemFromLocalStorage</a></li><li><a href="global.html#renderSummary">renderSummary</a></li><li><a href="global.html#setDashboard">setDashboard</a></li><li><a href="global.html#setDataForGreeting">setDataForGreeting</a></li><li><a href="global.html#setEventChangeImageOnHover">setEventChangeImageOnHover</a></li><li><a href="global.html#setEventCloseDropDown">setEventCloseDropDown</a></li><li><a href="global.html#setEventListener">setEventListener</a></li><li><a href="global.html#setEventListenerHoverBtn">setEventListenerHoverBtn</a></li><li><a href="global.html#setGreetingElement">setGreetingElement</a></li><li><a href="global.html#setGreetingForTimeOfDay">setGreetingForTimeOfDay</a></li><li><a href="global.html#setItem">setItem</a></li><li><a href="global.html#setItemInLocalStorage">setItemInLocalStorage</a></li><li><a href="global.html#setSummaryData">setSummaryData</a></li><li><a href="global.html#setTasksOfLoggedUser">setTasksOfLoggedUser</a></li><li><a href="global.html#showDisplay">showDisplay</a></li><li><a href="global.html#showError">showError</a></li><li><a href="global.html#sortArrayAlphabetically">sortArrayAlphabetically</a></li><li><a href="global.html#styleCurrentSectionInNav">styleCurrentSectionInNav</a></li><li><a href="global.html#toggleBlurFilter">toggleBlurFilter</a></li><li><a href="global.html#toggleCategoryDropDownContainer">toggleCategoryDropDownContainer</a></li><li><a href="global.html#toggleClass">toggleClass</a></li><li><a href="global.html#toggleContactDropDownContainer">toggleContactDropDownContainer</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Mon Jun 26 2023 17:34:47 GMT+0200 (Mitteleuropäische Sommerzeit)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
